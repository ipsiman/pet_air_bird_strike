## PET Проект Air Bird Strike
Компания получила заказ на проведение исследования влияния различных факторов на частоту столкновений птиц с самолетами. Необходимо собрать данные для этого исследования.

### Задачи проекта
1.	Разово собрать датасет.
2.	Разработать процесс для автоматической загрузки и обновления датасета в будущем.

### Техническое задание
В результате предварительных изысканий отдел аналитики нашел два подходящих источника данных:
- датасет со столкновениями с самолетами от FAA.
- данные о погоде от NCEI.
- данные по загруженности аэропортов от BTS.
- 
Нужно объединить данные из FAA и NCEI за 5 лет (2018-01-01 / 2022-12-31) в один CSV-файл. Также нужно собрать один CSV-файл из данных BTS для 10 аэропортов-лидеров по количеству столкновений. 


1. Первый датасет можно найти на сайте Федерального управления гражданской авиации США (FAA)
https://wildlife.faa.gov/home
Формат файлов: xlsx (данные из заданного диапазона дат и с другими фильтрами) или accdb (весь архив на текущую дату). 
2. Второй источник данных — это сайт Национальных центров экологической информации США (NCEI). Погодные данные с сайта NCEI можно получить двумя способами: прямой доступ к CSV-файлам через http и API. Известно, что API не всегда работает по выходным, поэтому при проектировании автоматической загрузки нужно использовать оба способа. 
3. Третий датасет находится на сайте Бюро Транспортной Статистики США (BTS)  https://www.transtats.bts.gov/Data_Elements.aspx Нас интересуют сводные помесячные данные по полетам за 5 лет (01/01/2018-12/31/2022) для первых 10 аэропортов по количеству столкновений. Также нужно добавить идентификатор аэропорта из датасета FAA.


## Начало

Эти инструкции позволят вам запустить копию проекта на вашем локальном компьютере.

### Установка
1. Для начала убедитесь, что у вас установлен Python и git.
2. Клонируйте репозиторий на свой компьютер.
3. Перейдите в папку с клонированным репозиторием.
4. Установите и активируйте виртуальное окружение venv (по желанию).
5. Установите зависимости из файла requirements.txt с помощью pip:
```
pip install -r requirements.txt
```
После выполнения этих шагов, виртуальное окружение будет активировано и готово для использования в проекте.

### Подготовка БД
Необходимо скачать базу данных со всеми данными столкновений с самолетами от FAA на текущий момент:
1. Перейдите по ссылке https://wildlife.faa.gov/search на сайт FAA.
2. Кликните по кнопке `Download File`, дождитесь обработки запроса и сохраните файл `NWSD.zip (~60mb)` в папку с проектом.

### Запуск обработки данных

Для получения данных необходимо запустить скрипт с двумя параметрами `start date` и `end date` в формате `YYYY-MM-DD (2020-02-15)`.
После обработки данные сохраняются в папку с проектом в формате CSV.

Пример запуска скрипта для получения данных с `2021-01-01` по `2021-02-15` (включительно):
```
python main.py 2021-01-01 2020-02-15
```
***
```
API load status: 200
Station found, st_code: 78741099999, date: 2021-01-05
Row: 1/644, errors: 0 | wait time: 0:37:45
API load status: 200
Station found, st_code: 72543094822, date: 2021-01-01
Row: 2/644, errors: 0 | wait time: 0:37:06
API load status: 200
Station found, st_code: 72211012842, date: 2021-01-02
Row: 3/644, errors: 0 | wait time: 0:36:59
API load status: 200
Station found, st_code: 72211012842, date: 2021-01-02
Row: 4/644, errors: 0 | wait time: 0:36:40
.......
.......
```
После обработки запроса в папке с проектом появится файл `data_2021-01-01_2021-02-15.csv`

### Описание данных
Описание данных со столкновениями с самолетами от FAA находятся в файле `air_data_info_FAA.pdf`.  
Описание данных о погоде от NCEI находятся в файле `st_data_info_NCEI.pdf`.

***
### Рекомендации
Для ускорения обработки нужного периода рекомендуется разбивать на несколько диапазонов дат и запускать параллельно несколько экземпляров скрипта.

Для справки: обработка данных за 1 год занимает порядка 7-9 часов.
